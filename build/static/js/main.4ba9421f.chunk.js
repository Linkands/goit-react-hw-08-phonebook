(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{116:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var c,r,a,o,i=n(0),s=n.n(i),u=n(47),b=n.n(u),j=(n(116),n(8)),l=n(6),d=n(21),O=n(4),p=n(5),h=p.a.div(c||(c=Object(O.a)(["\n  text-align: center;\n"]))),f=p.a.h2(r||(r=Object(O.a)(["\n  color: #4b3b40;\n"]))),x=p.a.p(a||(a=Object(O.a)(["\n  color: #82735c;\n  margin: 0;\n"]))),m=p.a.button(o||(o=Object(O.a)(["\n  background-color: #9db17c;\n  color: white;\n  margin-top: 20px;\n  cursor: pointer;\n"]))),g=n(178),v=n(10),k=n.n(v),w=n(22),y=n(18),C=n.n(y),L=n(9);function A(){return S.apply(this,arguments)}function S(){return(S=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/contacts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}C.a.defaults.baseURL="https://connections-api.herokuapp.com";var z=Object(L.c)("contacts/fetchContacts",Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),F=Object(L.c)("contacts/addContact",function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/contacts",t);case 2:return e.next=4,A();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(L.c)("contacts/deleteContact",function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete("/contacts/".concat(t));case 2:return e.next=4,A();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=function(e){return e.contacts.items},I=function(e){return e.contacts.filter},T=function(e){var t=q(e),n=I(e).toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))},U=n(1);var R,Z,E,B,D,J=function(){var e=Object(l.b)(),t=Object(l.c)(q),n=Object(i.useState)(""),c=Object(d.a)(n,2),r=c[0],a=c[1],o=Object(i.useState)(""),s=Object(d.a)(o,2),u=s[0],b=s[1];Object(i.useEffect)((function(){e(z())}),[e]);var j=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"name":a(c);break;case"number":b(c)}},O=function(){a(""),b("")};return Object(U.jsxs)(h,{children:[Object(U.jsx)(f,{}),Object(U.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c=Object(g.a)();if(t.find((function(e){return e.name.toLowerCase()===r.toLowerCase()})))return alert("".concat(r," already exists in your contacts"));e(F({id:c,name:r,number:u})),O()},children:[Object(U.jsx)(x,{children:"Name"}),Object(U.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:j,value:r}),Object(U.jsx)(x,{children:"Number"}),Object(U.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:j,value:u}),Object(U.jsx)("br",{}),Object(U.jsx)(m,{type:"submit",children:"Add contact"})]})]})},P=p.a.div(R||(R=Object(O.a)(["\n  text-align: center;\n"]))),M=p.a.ul(Z||(Z=Object(O.a)(["\n  color: #4b3b40;\n"]))),W=p.a.li(E||(E=Object(O.a)(["\n  color: #82735c;\n  list-style: none;\n"]))),$=p.a.button(B||(B=Object(O.a)(["\n  background-color: #9db17c;\n  color: white;\n  margin-left: 20px;\n  margin-top: 10px;\n  cursor: pointer;\n"]))),H=p.a.h2(D||(D=Object(O.a)(["\n  color: #4b3b40;\n"])));var V,G,K=function(){var e=Object(l.b)(),t=Object(l.c)(T);return Object(U.jsxs)(P,{children:[Object(U.jsx)(H,{children:"Contacts"}),Object(U.jsx)(M,{children:t.map((function(t){var n=t.id,c=t.name,r=t.number;return Object(U.jsxs)(W,{children:[c,": ",r,Object(U.jsx)($,{type:"button",onClick:function(){return function(t){e(N(t))}(n)},children:"Delete contact"})]},n)}))})]})},Q=p.a.div(V||(V=Object(O.a)(["\n  text-align: center;\n"]))),X=p.a.p(G||(G=Object(O.a)(["\n  color: #4b3b40;\n  margin-top: 10px;\n  margin-bottom: 0px;\n"]))),Y=Object(L.b)("contacts/changeFilter");var _,ee=function(){var e=Object(l.b)(),t=Object(l.c)(I);return Object(U.jsxs)(Q,{children:[Object(U.jsx)(X,{children:"Find contacts by name"}),Object(U.jsx)("input",{type:"text",name:"filter",onChange:function(t){e(Y(t.target.value))},value:t,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,autoComplete:"off"})]})},te=p.a.div(_||(_=Object(O.a)(["\n  margin: auto;\n  max-width: 1280px;\n"])));var ne,ce,re,ae,oe=function(e){var t=e.children;return Object(U.jsx)(te,{children:t})},ie=p.a.div(ne||(ne=Object(O.a)(["\n  text-align: center;\n"]))),se=p.a.h2(ce||(ce=Object(O.a)(["\n  color: #4b3b40;\n"]))),ue=p.a.p(re||(re=Object(O.a)(["\n  color: #82735c;\n  margin: 0;\n"]))),be=p.a.button(ae||(ae=Object(O.a)(["\n  background-color: #9db17c;\n  color: white;\n  margin-top: 20px;\n  cursor: pointer;\n"])));C.a.defaults.baseURL="https://connections-api.herokuapp.com";var je=function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},le=function(){C.a.defaults.headers.common.Authorization=""},de=Object(L.c)("auth/register",function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/signup",t);case 3:return n=e.sent,c=n.data,je(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),Oe=Object(L.c)("auth/login",function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,je(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),pe=Object(L.c)("auth/logout",Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/logout");case 3:le(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),he=Object(L.c)("auth/refresh",function(){var e=Object(w.a)(k.a.mark((function e(t,n){var c,r,a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),r=c.auth.token){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return je(r),e.prev=5,e.next=8,C.a.get("/users/current");case 8:return a=e.sent,o=a.data,e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(5);case 15:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}());var fe,xe,me,ge,ve=function(){var e=Object(l.b)(),t=Object(i.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(""),o=Object(d.a)(a,2),s=o[0],u=o[1],b=Object(i.useState)(""),j=Object(d.a)(b,2),O=j[0],p=j[1],h=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"name":r(c);break;case"email":u(c);break;case"password":p(c)}},f=function(){r(""),u(""),p("")};return Object(U.jsxs)(ie,{children:[Object(U.jsx)(se,{children:"Registration"}),Object(U.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(de({name:c,email:s,password:O})),f()},children:[Object(U.jsx)(ue,{children:"Name"}),Object(U.jsx)("input",{type:"text",name:"name",required:!0,onChange:h,value:c}),Object(U.jsx)(ue,{children:"Email"}),Object(U.jsx)("input",{type:"email",name:"email",required:!0,onChange:h,value:s,placeholder:"example@mail.com"}),Object(U.jsx)(ue,{children:"Password"}),Object(U.jsx)("input",{type:"password",name:"password",required:!0,onChange:h,value:O}),Object(U.jsx)("br",{}),Object(U.jsx)(be,{type:"submit",children:"Register"})]})]})},ke=p.a.div(fe||(fe=Object(O.a)(["\n  text-align: center;\n"]))),we=p.a.h2(xe||(xe=Object(O.a)(["\n  color: #4b3b40;\n"]))),ye=p.a.p(me||(me=Object(O.a)(["\n  color: #82735c;\n  margin: 0;\n"]))),Ce=p.a.button(ge||(ge=Object(O.a)(["\n  background-color: #9db17c;\n  color: white;\n  margin-top: 20px;\n  cursor: pointer;\n"])));var Le,Ae,Se=function(){var e=Object(l.b)(),t=Object(i.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(""),o=Object(d.a)(a,2),s=o[0],u=o[1],b=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"email":r(c);break;case"password":u(c)}},j=function(){r(""),u("")};return Object(U.jsxs)(ke,{children:[Object(U.jsx)(we,{children:"Login"}),Object(U.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(Oe({email:c,password:s})),j()},children:[Object(U.jsx)(ye,{children:"Email"}),Object(U.jsx)("input",{type:"email",name:"email",required:!0,onChange:b,value:c,placeholder:"example@mail.com"}),Object(U.jsx)(ye,{children:"Password"}),Object(U.jsx)("input",{type:"password",name:"password",required:!0,onChange:b,value:s}),Object(U.jsx)("br",{}),Object(U.jsx)(Ce,{type:"submit",children:"Log in"})]})]})},ze=n(30),Fe=Object(p.a)(ze.b)(Le||(Le=Object(O.a)(["\n  &.link {\n    text-decoration: none;\n    color: black;\n    margin: 10px;\n    text-shadow: 1px 1px grey;\n  }\n  &.activeLink {\n    color: #9db17c;\n    font-size: 20px;\n  }\n"]))),Ne=p.a.nav(Ae||(Ae=Object(O.a)(["\n  /* text-align: center; */\n  padding: 10px;\n  border-bottom: solid 1px black;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n"]))),qe=function(e){return e.auth.isLoggedIn},Ie=function(e){return e.auth.user.name},Te=function(e){return e.auth.isFetchingCurrentUser};var Ue=function(){var e=Object(l.c)(qe);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Fe,{exact:!0,to:"/",className:"link",activeClassName:"activeLink",children:"Home"}),e&&Object(U.jsx)(Fe,{to:"/contacts",className:"link",activeClassName:"activeLink",children:"Contacts"})]})};var Re,Ze,Ee,Be=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Fe,{to:"/login",className:"link",activeClassName:"activeLink",children:"Login"}),Object(U.jsx)(Fe,{to:"/register",className:"link",activeClassName:"activeLink",children:"Register"})]})},De=p.a.div(Re||(Re=Object(O.a)(["\n  display: flex;\n  align-items: center;\n"]))),Je=p.a.p(Ze||(Ze=Object(O.a)(["\n  color: #82735c;\n  margin-right: 5px;\n"]))),Pe=p.a.button(Ee||(Ee=Object(O.a)(["\n  background-color: #9db17c;\n  color: white;\n  cursor: pointer;\n  margin-left: 10px;\n"]))),Me=n(109);var We=function(){var e=Object(l.b)(),t=Object(l.c)(Ie);return Object(U.jsxs)(De,{children:[Object(U.jsxs)(Je,{children:["Welcome, ",t,"!"]}),Object(U.jsx)(Me.a,{round:!0,size:"30",src:"https://picsum.photos/200/300"}),Object(U.jsx)(Pe,{onClick:function(){return e(pe())},children:"Logout"})]})};var $e=function(){var e=Object(l.c)(qe);return Object(U.jsxs)(Ne,{children:[Object(U.jsx)(Ue,{}),e?Object(U.jsx)(We,{}):Object(U.jsx)(Be,{})]})},He=n(34),Ve=n(50),Ge=["children","redirectTo"];var Ke=function(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/":n,r=Object(Ve.a)(e,Ge),a=Object(l.c)(qe);return Object(U.jsx)(j.b,Object(He.a)(Object(He.a)({},r),{},{children:a?t:Object(U.jsx)(j.a,{to:c})}))},Qe=["children","restricted","redirectTo"];var Xe=function(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,r=e.redirectTo,a=void 0===r?"/":r,o=Object(Ve.a)(e,Qe),i=Object(l.c)(qe)&&c;return Object(U.jsx)(j.b,Object(He.a)(Object(He.a)({},o),{},{children:i?Object(U.jsx)(j.a,{to:a}):t}))};var Ye,_e,et,tt,nt=function(){var e=Object(l.c)(q),t=Object(l.b)(),n=Object(l.c)(Te);return Object(i.useEffect)((function(){t(he())}),[t]),Object(U.jsx)(oe,{children:!n&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)($e,{}),Object(U.jsx)(i.Suspense,{fallback:Object(U.jsx)("div",{children:"Loading..."}),children:Object(U.jsxs)(j.d,{children:[Object(U.jsx)(Xe,{exact:!0,path:"/",restricted:!0,children:"Welcome to Phonebook app! Phonebook app allows you to save your contact names, phone numbers and get them any time by logging in to your account."}),Object(U.jsx)(Xe,{path:"/register",restricted:!0,children:Object(U.jsx)(ve,{})}),Object(U.jsx)(Xe,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(U.jsx)(Se,{})}),Object(U.jsxs)(Ke,{path:"/contacts",redirectTo:"/login",children:[Object(U.jsx)(J,{}),e.length>0&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ee,{}),Object(U.jsx)(K,{})]})]})]})})]})})},ct=n(110),rt=n(7),at=n(12),ot=Object(L.d)([],(Ye={},Object(rt.a)(Ye,z.fulfilled,(function(e,t){return t.payload})),Object(rt.a)(Ye,F.fulfilled,(function(e,t){return t.payload})),Object(rt.a)(Ye,N.fulfilled,(function(e,t){return t.payload})),Ye)),it=Object(L.d)(!1,(_e={},Object(rt.a)(_e,z.pending,(function(){return!0})),Object(rt.a)(_e,z.fulfilled,(function(){return!1})),Object(rt.a)(_e,z.rejected,(function(){return!1})),_e)),st=Object(L.d)(null,(et={},Object(rt.a)(et,z.rejected,(function(e,t){return t.payload})),Object(rt.a)(et,z.fulfilled,(function(){return null})),Object(rt.a)(et,F.rejected,(function(e,t){return t.payload})),Object(rt.a)(et,F.pending,(function(){return null})),Object(rt.a)(et,N.rejected,(function(e,t){return t.payload})),Object(rt.a)(et,N.pending,(function(){return null})),et)),ut=Object(L.d)("",Object(rt.a)({},Y,(function(e,t){return t.payload}))),bt=Object(at.b)({items:ot,isLoading:it,filter:ut,error:st}),jt={user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},lt=Object(L.e)({name:"auth",initialState:jt,extraReducers:(tt={},Object(rt.a)(tt,de.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(rt.a)(tt,Oe.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(rt.a)(tt,pe.fulfilled,(function(e){e.user=jt.user,e.token=jt.token,e.isLoggedIn=jt.isLoggedIn})),Object(rt.a)(tt,he.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(rt.a)(tt,he.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(rt.a)(tt,he.rejected,(function(e){e.isFetchingCurrentUser=!1})),tt)}).reducer,dt=n(23),Ot=n(107),pt=n.n(Ot),ht=Object(ct.a)(Object(L.f)({serializableCheck:{ignoredActions:[dt.a,dt.f,dt.b,dt.c,dt.d,dt.e]}})),ft={key:"auth",storage:pt.a,whitelist:["token"]},xt=Object(L.a)({reducer:{contacts:bt,auth:Object(dt.g)(ft,lt)},middleware:ht,devTools:!1}),mt=Object(dt.h)(xt),gt=n(108);b.a.render(Object(U.jsx)(s.a.StrictMode,{children:Object(U.jsx)(l.a,{store:xt,children:Object(U.jsx)(gt.a,{loading:null,persistor:mt,children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(nt,{})})})})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.4ba9421f.chunk.js.map